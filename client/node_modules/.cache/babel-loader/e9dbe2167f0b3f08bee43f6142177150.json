{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KASIM\\\\Documents\\\\bookist-alpha\\\\client\\\\src\\\\pages\\\\search\\\\SearchPage.jsx\",\n    _s = $RefreshSig$();\n\nimport classes from \"./SearchPage.module.css\";\nimport { withRouter } from \"../../app/hocs\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport axios from \"axios\";\nimport Loading from \"../../components/common/loading/Loading\";\nimport Book from \"../../components/book/Book\";\nimport SearchFilter from \"./SearchFilter\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SearchPage = props => {\n  _s();\n\n  const query = props.location.search.slice(7);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchResults, setSearchResults] = useState(null);\n  const [filter, setFilter] = useState(false);\n  const [errorState, setErrorState] = useState(\"\");\n\n  const applyFilter = booksArray => {\n    setFilter(true);\n    setSearchResults(null);\n    setSearchResults(booksArray);\n  };\n\n  const applySearch = useCallback(async () => {\n    try {\n      const response = await axios.get(`/api/search/${query}`);\n      setSearchResults(response.data);\n    } catch (e) {\n      setErrorState(e.response.data);\n    }\n\n    setIsLoading(false);\n  }, [query]);\n  useEffect(() => {\n    if (!filter) {\n      applySearch();\n    }\n  }, [filter, applySearch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isLoading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 24\n    }, this), !isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.searchPageWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchWrapper,\n        children: errorState.length === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: searchResults.map(searchResult => /*#__PURE__*/_jsxDEV(Book, {\n            searchResult: searchResult\n          }, uuidv4(), false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 28\n          }, this))\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\" \", errorState, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchFilterWrapper,\n        children: /*#__PURE__*/_jsxDEV(SearchFilter, {\n          searchResults: searchResults,\n          applyFilter: applyFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SearchPage, \"Wly8S5tSYS2101UN15hvA6v3xtI=\");\n\n_c = SearchPage;\nexport default _c2 = withRouter(SearchPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/KASIM/Documents/bookist-alpha/client/src/pages/search/SearchPage.jsx"],"names":["classes","withRouter","useCallback","useEffect","useState","v4","uuidv4","axios","Loading","Book","SearchFilter","SearchPage","props","query","location","search","slice","isLoading","setIsLoading","searchResults","setSearchResults","filter","setFilter","errorState","setErrorState","applyFilter","booksArray","applySearch","response","get","data","e","searchPageWrapper","searchWrapper","length","map","searchResult","searchFilterWrapper"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,yBAApB;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,yCAApB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;;;AAEA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAAA;;AAC3B,QAAMC,KAAK,GAAGD,KAAK,CAACE,QAAN,CAAeC,MAAf,CAAsBC,KAAtB,CAA4B,CAA5B,CAAd;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACe,aAAD,EAAgBC,gBAAhB,IAAoChB,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM,CAACiB,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACmB,UAAD,EAAaC,aAAb,IAA8BpB,QAAQ,CAAC,EAAD,CAA5C;;AAEA,QAAMqB,WAAW,GAAIC,UAAD,IAAgB;AACjCJ,IAAAA,SAAS,CAAC,IAAD,CAAT;AACAF,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAA,IAAAA,gBAAgB,CAACM,UAAD,CAAhB;AACF,GAJD;;AAMA,QAAMC,WAAW,GAAGzB,WAAW,CAAC,YAAY;AACzC,QAAI;AACD,YAAM0B,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAN,CAAW,eAAchB,KAAM,EAA/B,CAAvB;AACAO,MAAAA,gBAAgB,CAACQ,QAAQ,CAACE,IAAV,CAAhB;AACF,KAHD,CAGE,OAAOC,CAAP,EAAU;AACTP,MAAAA,aAAa,CAACO,CAAC,CAACH,QAAF,CAAWE,IAAZ,CAAb;AACF;;AACDZ,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACF,GAR8B,EAQ5B,CAACL,KAAD,CAR4B,CAA/B;AAUAV,EAAAA,SAAS,CAAC,MAAM;AACb,QAAI,CAACkB,MAAL,EAAa;AACVM,MAAAA,WAAW;AACb;AACH,GAJQ,EAIN,CAACN,MAAD,EAASM,WAAT,CAJM,CAAT;AAMA,sBACG;AAAA,eACIV,SAAS,iBAAI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,YADjB,EAGI,CAACA,SAAD,iBACE;AAAK,MAAA,SAAS,EAAEjB,OAAO,CAACgC,iBAAxB;AAAA,8BACG;AAAK,QAAA,SAAS,EAAEhC,OAAO,CAACiC,aAAxB;AAAA,kBACIV,UAAU,CAACW,MAAX,KAAsB,CAAtB,gBACE;AAAA,oBACIf,aAAa,CAACgB,GAAd,CAAmBC,YAAD,iBAChB,QAAC,IAAD;AAAM,YAAA,YAAY,EAAEA;AAApB,aAAuC9B,MAAM,EAA7C;AAAA;AAAA;AAAA;AAAA,kBADF;AADJ,yBADF,gBAOE;AAAA,0BAAUiB,UAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AARN;AAAA;AAAA;AAAA;AAAA,cADH,eAYG;AAAK,QAAA,SAAS,EAAEvB,OAAO,CAACqC,mBAAxB;AAAA,+BACG,QAAC,YAAD;AACG,UAAA,aAAa,EAAElB,aADlB;AAEG,UAAA,WAAW,EAAEM;AAFhB;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,cAZH;AAAA;AAAA;AAAA;AAAA;AAAA,YAJN;AAAA,kBADH;AA2BF,CAxDD;;GAAMd,U;;KAAAA,U;AA0DN,qBAAeV,UAAU,CAACU,UAAD,CAAzB","sourcesContent":["import classes from \"./SearchPage.module.css\";\r\nimport { withRouter } from \"../../app/hocs\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport axios from \"axios\";\r\nimport Loading from \"../../components/common/loading/Loading\";\r\nimport Book from \"../../components/book/Book\";\r\nimport SearchFilter from \"./SearchFilter\";\r\n\r\nconst SearchPage = (props) => {\r\n   const query = props.location.search.slice(7);\r\n   const [isLoading, setIsLoading] = useState(true);\r\n   const [searchResults, setSearchResults] = useState(null);\r\n   const [filter, setFilter] = useState(false);\r\n   const [errorState, setErrorState] = useState(\"\");\r\n\r\n   const applyFilter = (booksArray) => {\r\n      setFilter(true);\r\n      setSearchResults(null);\r\n      setSearchResults(booksArray);\r\n   };\r\n\r\n   const applySearch = useCallback(async () => {\r\n      try {\r\n         const response = await axios.get(`/api/search/${query}`);\r\n         setSearchResults(response.data);\r\n      } catch (e) {\r\n         setErrorState(e.response.data);\r\n      }\r\n      setIsLoading(false);\r\n   }, [query]);\r\n\r\n   useEffect(() => {\r\n      if (!filter) {\r\n         applySearch();\r\n      }\r\n   }, [filter, applySearch]);\r\n\r\n   return (\r\n      <>\r\n         {isLoading && <Loading />}\r\n\r\n         {!isLoading && (\r\n            <div className={classes.searchPageWrapper}>\r\n               <div className={classes.searchWrapper}>\r\n                  {errorState.length === 0 ? (\r\n                     <>\r\n                        {searchResults.map((searchResult) => (\r\n                           <Book searchResult={searchResult} key={uuidv4()} />\r\n                        ))}\r\n                     </>\r\n                  ) : (\r\n                     <strong> {errorState} </strong>\r\n                  )}\r\n               </div>\r\n               <div className={classes.searchFilterWrapper}>\r\n                  <SearchFilter\r\n                     searchResults={searchResults}\r\n                     applyFilter={applyFilter}\r\n                  />\r\n               </div>\r\n            </div>\r\n         )}\r\n      </>\r\n   );\r\n};\r\n\r\nexport default withRouter(SearchPage);\r\n"]},"metadata":{},"sourceType":"module"}