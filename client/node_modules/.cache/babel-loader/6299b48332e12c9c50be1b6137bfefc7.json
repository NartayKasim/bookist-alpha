{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KASIM/Documents/bookist-alpha/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KASIM/Documents/bookist-alpha/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";var initialState={book:{}};export var submitRating=createAsyncThunk(\"book/submitRating\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ratingObj){var book,rating,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:book=ratingObj.book,rating=ratingObj.rating;_context.next=3;return axios.put(\"/api/book/rate\",{book:book,rating:rating});case 3:response=_context.sent;return _context.abrupt(\"return\",response.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var getAcquiredStats=createAsyncThunk(\"book/getAcquiredStats\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(bookObj){var title,author,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:title=bookObj.title,author=bookObj.author;_context2.next=3;return axios.get(\"/api/book/get-bookcard\",{title:title,author:author});case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());var volumeInfoSlice=createSlice({name:\"volumeInfoSlice\",initialState:initialState,reducers:{loadAcquiredStats:function loadAcquiredStats(state,action){state.acquired_stats=action.payload;return state;},loadBook:function loadBook(state,action){state=action.payload;return state;},clearBookState:function clearBookState(state,action){return initialState;}},extraReducers:function extraReducers(builder){builder.addCase(submitRating.fulfilled,function(state,action){state.book.users_rating=action.payload.rating;return state;}).addCase(getAcquiredStats.fulfilled,function(state,action){state=action.payload;});}});var _volumeInfoSlice$acti=volumeInfoSlice.actions,loadBook=_volumeInfoSlice$acti.loadBook,clearBookState=_volumeInfoSlice$acti.clearBookState;export{loadBook,clearBookState};export default volumeInfoSlice.reducer;","map":{"version":3,"sources":["C:/Users/KASIM/Documents/bookist-alpha/client/src/services/volumeInfoSlice.js"],"names":["createSlice","createAsyncThunk","axios","initialState","book","submitRating","ratingObj","rating","put","response","data","getAcquiredStats","bookObj","title","author","get","volumeInfoSlice","name","reducers","loadAcquiredStats","state","action","acquired_stats","payload","loadBook","clearBookState","extraReducers","builder","addCase","fulfilled","users_rating","actions","reducer"],"mappings":"+OAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAG,CAClBC,IAAI,CAAE,EADY,CAArB,CAIA,MAAO,IAAMC,CAAAA,YAAY,CAAGJ,gBAAgB,CACzC,mBADyC,0FAEzC,iBAAOK,SAAP,2IACWF,IADX,CAC4BE,SAD5B,CACWF,IADX,CACiBG,MADjB,CAC4BD,SAD5B,CACiBC,MADjB,uBAE0BL,CAAAA,KAAK,CAACM,GAAN,CAAU,gBAAV,CAA4B,CAChDJ,IAAI,CAAJA,IADgD,CAEhDG,MAAM,CAANA,MAFgD,CAA5B,CAF1B,QAESE,QAFT,+CAMUA,QAAQ,CAACC,IANnB,wDAFyC,+DAArC,CAYP,MAAO,IAAMC,CAAAA,gBAAgB,CAAGV,gBAAgB,CAC7C,uBAD6C,2FAE7C,kBAAOW,OAAP,gJACWC,KADX,CAC6BD,OAD7B,CACWC,KADX,CACkBC,MADlB,CAC6BF,OAD7B,CACkBE,MADlB,wBAE0BZ,CAAAA,KAAK,CAACa,GAAN,CAAU,wBAAV,CAAoC,CACxDF,KAAK,CAALA,KADwD,CAExDC,MAAM,CAANA,MAFwD,CAApC,CAF1B,QAESL,QAFT,iDAMUA,QAAQ,CAACC,IANnB,0DAF6C,iEAAzC,CAYP,GAAMM,CAAAA,eAAe,CAAGhB,WAAW,CAAC,CACjCiB,IAAI,CAAE,iBAD2B,CAEjCd,YAAY,CAAZA,YAFiC,CAGjCe,QAAQ,CAAE,CACPC,iBADO,4BACWC,KADX,CACkBC,MADlB,CAC0B,CAC9BD,KAAK,CAACE,cAAN,CAAuBD,MAAM,CAACE,OAA9B,CACA,MAAOH,CAAAA,KAAP,CACF,CAJM,CAMPI,QANO,mBAMEJ,KANF,CAMSC,MANT,CAMiB,CACrBD,KAAK,CAAGC,MAAM,CAACE,OAAf,CACA,MAAOH,CAAAA,KAAP,CACF,CATM,CAWPK,cAXO,yBAWQL,KAXR,CAWeC,MAXf,CAWuB,CAC3B,MAAOlB,CAAAA,YAAP,CACF,CAbM,CAHuB,CAkBjCuB,aAAa,CAAE,uBAACC,OAAD,CAAa,CACzBA,OAAO,CACHC,OADJ,CACYvB,YAAY,CAACwB,SADzB,CACoC,SAACT,KAAD,CAAQC,MAAR,CAAmB,CACjDD,KAAK,CAAChB,IAAN,CAAW0B,YAAX,CAA0BT,MAAM,CAACE,OAAP,CAAehB,MAAzC,CACA,MAAOa,CAAAA,KAAP,CACF,CAJJ,EAKIQ,OALJ,CAKYjB,gBAAgB,CAACkB,SAL7B,CAKwC,SAACT,KAAD,CAAQC,MAAR,CAAmB,CACrDD,KAAK,CAAGC,MAAM,CAACE,OAAf,CACF,CAPJ,EAQF,CA3BgC,CAAD,CAAnC,CA8BO,0BAAqCP,eAAe,CAACe,OAArD,CAAQP,QAAR,uBAAQA,QAAR,CAAkBC,cAAlB,uBAAkBA,cAAlB,C,gCACP,cAAeT,CAAAA,eAAe,CAACgB,OAA/B","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n   book: {},\r\n};\r\n\r\nexport const submitRating = createAsyncThunk(\r\n   \"book/submitRating\",\r\n   async (ratingObj) => {\r\n      const { book, rating } = ratingObj;\r\n      const response = await axios.put(\"/api/book/rate\", {\r\n         book,\r\n         rating,\r\n      });\r\n      return response.data;\r\n   }\r\n);\r\n\r\nexport const getAcquiredStats = createAsyncThunk(\r\n   \"book/getAcquiredStats\",\r\n   async (bookObj) => {\r\n      const { title, author } = bookObj;\r\n      const response = await axios.get(\"/api/book/get-bookcard\", {\r\n         title,\r\n         author,\r\n      });\r\n      return response.data;\r\n   }\r\n);\r\n\r\nconst volumeInfoSlice = createSlice({\r\n   name: \"volumeInfoSlice\",\r\n   initialState,\r\n   reducers: {\r\n      loadAcquiredStats(state, action) {\r\n         state.acquired_stats = action.payload;\r\n         return state;\r\n      },\r\n\r\n      loadBook(state, action) {\r\n         state = action.payload;\r\n         return state;\r\n      },\r\n\r\n      clearBookState(state, action) {\r\n         return initialState;\r\n      },\r\n   },\r\n   extraReducers: (builder) => {\r\n      builder\r\n         .addCase(submitRating.fulfilled, (state, action) => {\r\n            state.book.users_rating = action.payload.rating;\r\n            return state;\r\n         })\r\n         .addCase(getAcquiredStats.fulfilled, (state, action) => {\r\n            state = action.payload;\r\n         });\r\n   },\r\n});\r\n\r\nexport const { loadBook, clearBookState } = volumeInfoSlice.actions;\r\nexport default volumeInfoSlice.reducer;\r\n"]},"metadata":{},"sourceType":"module"}