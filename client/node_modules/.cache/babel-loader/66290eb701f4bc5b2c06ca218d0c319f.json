{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KASIM/Documents/bookist-alpha/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KASIM/Documents/bookist-alpha/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/KASIM/Documents/bookist-alpha/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{useNavigate}from\"react-router\";import{useDispatch}from\"react-redux\";import{getUserBooks,toggleIsLoggedIn}from\"../../../services/librarySlice\";import classes from\"./Register.module.css\";import accountIcon from\"../../../assets/account.png\";import emailIcon from\"../../../assets/email.png\";import passwordIcon from\"../../../assets/password.png\";import Button from\"../../../components/common/button/Button\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),displayName=_useState4[0],setDisplayName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),verifyPassword=_useState8[0],setVerifyPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),errorState=_useState10[0],setErrorState=_useState10[1];var navigate=useNavigate();var dispatch=useDispatch();var onRegisterClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,_e$response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrorState(\"\");if(!(password!==verifyPassword)){_context.next=5;break;}return _context.abrupt(\"return\",setErrorState(\"Password and verify password fields mismatch.\"));case 5:if(!(password.length===0||verifyPassword.length===0||displayName.length===0||email.length===0)){_context.next=7;break;}return _context.abrupt(\"return\",setErrorState(\"Please enter a value for all required fields.\"));case 7:user={displayName:displayName,email:email,password:password};_context.prev=8;_context.next=11;return axios.post(\"/api/auth/register\",{user:user});case 11:dispatch(getUserBooks());dispatch(toggleIsLoggedIn());navigate(\"/library\");_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](8);setErrorState((_e$response=_context.t0.response)===null||_e$response===void 0?void 0:_e$response.data);case 19:case\"end\":return _context.stop();}}},_callee,null,[[8,16]]);}));return function onRegisterClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.registerWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.registerBody,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.labels,children:\"Display Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputWrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.inputIcon,src:accountIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setDisplayName(e.target.value);},className:classes.input,type:\"text\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.labels,children:\"Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputWrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.inputIcon,src:emailIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setEmail(e.target.value);},className:classes.input,type:\"text\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.labels,children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputWrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.inputIcon,src:passwordIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setPassword(e.target.value);},className:classes.input,type:\"text\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.labels,children:\"Verify Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputWrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.inputIcon,src:passwordIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setVerifyPassword(e.target.value);},className:classes.input,type:\"text\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.errors,children:errorState})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.registerButtons,children:/*#__PURE__*/_jsx(Button,{onClickFunc:onRegisterClick,children:\"Register\"})})]});}","map":{"version":3,"sources":["C:/Users/KASIM/Documents/bookist-alpha/client/src/pages/login/register/Register.jsx"],"names":["useState","useNavigate","useDispatch","getUserBooks","toggleIsLoggedIn","classes","accountIcon","emailIcon","passwordIcon","Button","axios","Register","email","setEmail","displayName","setDisplayName","password","setPassword","verifyPassword","setVerifyPassword","errorState","setErrorState","navigate","dispatch","onRegisterClick","length","user","post","response","data","registerWrapper","registerBody","labels","inputWrapper","inputIcon","e","target","value","input","errors","registerButtons"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getUserBooks, toggleIsLoggedIn } from \"../../../services/librarySlice\";\r\nimport classes from \"./Register.module.css\";\r\nimport accountIcon from \"../../../assets/account.png\";\r\nimport emailIcon from \"../../../assets/email.png\";\r\nimport passwordIcon from \"../../../assets/password.png\";\r\nimport Button from \"../../../components/common/button/Button\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Register() {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [displayName, setDisplayName] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [verifyPassword, setVerifyPassword] = useState(\"\");\r\n   const [errorState, setErrorState] = useState(\"\");\r\n\r\n   const navigate = useNavigate();\r\n   const dispatch = useDispatch();\r\n\r\n   const onRegisterClick = async () => {\r\n      setErrorState(\"\");\r\n      if (password !== verifyPassword) {\r\n         return setErrorState(\"Password and verify password fields mismatch.\");\r\n      } else if (\r\n         password.length === 0 ||\r\n         verifyPassword.length === 0 ||\r\n         displayName.length === 0 ||\r\n         email.length === 0\r\n      ) {\r\n         return setErrorState(\"Please enter a value for all required fields.\");\r\n      }\r\n\r\n      const user = {\r\n         displayName,\r\n         email,\r\n         password,\r\n      };\r\n\r\n      try {\r\n         await axios.post(\"/api/auth/register\", { user });\r\n         dispatch(getUserBooks());\r\n         dispatch(toggleIsLoggedIn());\r\n         navigate(\"/library\");\r\n      } catch (e) {\r\n         setErrorState(e.response?.data);\r\n      }\r\n   };\r\n\r\n   return (\r\n      <div className={classes.registerWrapper}>\r\n         <div className={classes.registerBody}>\r\n            <div className={classes.labels}>Display Name</div>\r\n\r\n            <div className={classes.inputWrapper}>\r\n               <img className={classes.inputIcon} src={accountIcon} alt=\"\" />\r\n               <input\r\n                  onChange={(e) => setDisplayName(e.target.value)}\r\n                  className={classes.input}\r\n                  type=\"text\"\r\n               />\r\n            </div>\r\n            <div className={classes.labels}>Email</div>\r\n\r\n            <div className={classes.inputWrapper}>\r\n               <img className={classes.inputIcon} src={emailIcon} alt=\"\" />\r\n               <input\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className={classes.input}\r\n                  type=\"text\"\r\n               />\r\n            </div>\r\n            <div className={classes.labels}>Password</div>\r\n\r\n            <div className={classes.inputWrapper}>\r\n               <img className={classes.inputIcon} src={passwordIcon} alt=\"\" />\r\n               <input\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className={classes.input}\r\n                  type=\"text\"\r\n               />\r\n            </div>\r\n            <div className={classes.labels}>Verify Password</div>\r\n\r\n            <div className={classes.inputWrapper}>\r\n               <img className={classes.inputIcon} src={passwordIcon} alt=\"\" />\r\n               <input\r\n                  onChange={(e) => setVerifyPassword(e.target.value)}\r\n                  className={classes.input}\r\n                  type=\"text\"\r\n               />\r\n            </div>\r\n            <div className={classes.errors}>{errorState}</div>\r\n         </div>\r\n         <div className={classes.registerButtons}>\r\n            <Button onClickFunc={onRegisterClick}>Register</Button>\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}